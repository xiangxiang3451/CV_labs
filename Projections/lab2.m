% 1. Загрузка изображения
I = imread('ob.jpeg'); 

% 2. Получение размеров изображения
[numRows, numCols, numChannels] = size(I);

% 3. Инициализация результатов горизонтальной и вертикальной проекций
Proj_H = zeros(numRows, 1);  % Для хранения горизонтальной проекции (сумма значений пикселей в каждой строке)
Proj_V = zeros(numCols, 1);  % Для хранения вертикальной проекции (сумма значений пикселей в каждом столбце)

% 4. Расчет горизонтальной проекции (построчное суммирование значений пикселей в каналах RGB)
for i = 1:numRows
    Proj_H(i) = sum(I(i, :, 1)) + sum(I(i, :, 2)) + sum(I(i, :, 3));  % Суммирование значений в каналах RGB
end

% 5. Расчет вертикальной проекции (постолбцовое суммирование значений пикселей в каналах RGB)
for j = 1:numCols
    Proj_V(j) = sum(I(:, j, 1)) + sum(I(:, j, 2)) + sum(I(:, j, 3));  % Суммирование значений в каналах RGB
end

% 6. Построение графиков горизонтальной и вертикальной проекций
figure;
subplot(2, 1, 1);
plot(Proj_H);  % Построение графика горизонтальной проекции
title('Горизонтальная проекция');
xlabel('Номер строки');
ylabel('Сумма интенсивностей пикселей');

subplot(2, 1, 2);
plot(Proj_V);  % Построение графика вертикальной проекции
title('Вертикальная проекция');
xlabel('Номер столбца');
ylabel('Сумма интенсивностей пикселей');

% 7. Определение границ объекта (на основе простого метода порогового значения)
threshold_H = max(Proj_H) * 0.5;  % Установка порога для горизонтальной проекции на уровне 50% от максимального значения
object_rows = find(Proj_H > threshold_H);  % Нахождение строк, где проекция превышает порог

threshold_V = max(Proj_V) * 0.5;  % Установка порога для вертикальной проекции на уровне 50% от максимального значения
object_cols = find(Proj_V > threshold_V);  % Нахождение столбцов, где проекция превышает порог

% 8. Отметка границ объекта на изображении
figure;
imshow(I);  % Отображение исходного изображения
hold on;
rectangle('Position', [min(object_cols), min(object_rows), ...
                      max(object_cols) - min(object_cols), ...
                      max(object_rows) - min(object_rows)], ...
                      'EdgeColor', 'r', 'LineWidth', 2);  % Рисование красной рамки для выделения границ объекта
hold off;
title('Границы объекта');
