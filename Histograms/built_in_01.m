% Шаг 1: Чтение низкоконтрастного цветного изображения
I = imread('photo.jpeg'); % Загрузка низкоконтрастного цветного изображения

% Шаг 2: Получение размеров изображения и количества каналов
[numRows, numCols, Layers] = size(I);

% Шаг 3: Извлечение отдельных каналов RGB
I_red = I(:, :, 1);   % Извлечение красного канала
I_green = I(:, :, 2); % Извлечение зеленого канала
I_blue = I(:, :, 3);  % Извлечение синего канала

% Шаг 4: Применение адаптивного выравнивания гистограммы к каждому каналу
I_red_eq = adapthisteq(I_red);   % Адаптивное выравнивание гистограммы для красного канала
I_green_eq = adapthisteq(I_green); % Адаптивное выравнивание гистограммы для зеленого канала
I_blue_eq = adapthisteq(I_blue);  % Адаптивное выравнивание гистограммы для синего канала

% Шаг 5: Применение растяжения контраста для каждого канала
I_red_stretch = imadjust(I_red_eq, stretchlim(I_red_eq), []);    % Автоматическое растяжение контраста для красного канала
I_green_stretch = imadjust(I_green_eq, stretchlim(I_green_eq), []); % Автоматическое растяжение контраста для зеленого канала
I_blue_stretch = imadjust(I_blue_eq, stretchlim(I_blue_eq), []);  % Автоматическое растяжение контраста для синего канала

% Шаг 6: Объединение обработанных каналов в цветное изображение
I_enhanced = cat(3, I_red_stretch, I_green_stretch, I_blue_stretch);  % Объединение улучшенных каналов RGB

% Шаг 7: Визуализация исходного изображения, результатов обработки и гистограмм
figure;
% Исходное изображение
subplot(3,4,1), imshow(I), title('Исходное цветное изображение');
% Красный канал и его гистограмма
subplot(3,4,2), imshow(I_red), title('Красный канал');
subplot(3,4,3), imshow(I_red_stretch), title('Красный канал после улучшения');
subplot(3,4,4), imhist(I_red), title('Гистограмма красного канала');
% Зеленый канал и его гистограмма
subplot(3,4,5), imshow(I_green), title('Зеленый канал');
subplot(3,4,6), imshow(I_green_stretch), title('Зеленый канал после улучшения');
subplot(3,4,7), imhist(I_green), title('Гистограмма зеленого канала');
% Синий канал и его гистограмма
subplot(3,4,8), imshow(I_blue), title('Синий канал');
subplot(3,4,9), imshow(I_blue_stretch), title('Синий канал после улучшения');
subplot(3,4,10), imhist(I_blue), title('Гистограмма синего канала');
% Улучшенное изображение
subplot(3,4,11), imshow(I_enhanced), title('Улучшенное цветное изображение');
